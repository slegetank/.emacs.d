从purcell处抓过来
* slime
需要首先安装sbcl
#+BEGIN_SRC emacs-lisp
  (require-package 'slime)
  ;; package.el compiles the contrib subdir, but the compilation order
  ;; causes problems, so we remove the .elc files there. See
  ;; http://lists.common-lisp.net/pipermail/slime-devel/2012-February/018470.html
  (mapc #'delete-file
        (file-expand-wildcards (concat user-emacs-directory "elpa/slime-2*/contrib/*.elc")))

  (require-package 'hippie-expand-slime)
  (require-package 'slime-company)

  
  ;;; Lisp buffers

  (defun sanityinc/slime-setup ()
    "Mode setup function for slime lisp buffers."
    (set-up-slime-hippie-expand))

  (with-eval-after-load 'slime
  (message "123")
    (setq slime-protocol-version 'ignore)
    (setq slime-net-coding-system 'utf-8-unix)
    (let ((extras (when (require 'slime-company nil t)
                    '(slime-company))))
      (slime-setup (append '(slime-repl slime-fuzzy) extras)))
    (setq slime-complete-symbol*-fancy t)
    (setq slime-complete-symbol-function 'slime-fuzzy-complete-symbol)
    (add-hook 'slime-mode-hook 'sanityinc/slime-setup))

  
  ;;; REPL

  (defun sanityinc/slime-repl-setup ()
    "Mode setup function for slime REPL."
    (set-up-slime-hippie-expand)
    (setq show-trailing-whitespace nil))

  (with-eval-after-load 'slime-repl
    ;; Stop SLIME's REPL from grabbing DEL, which is annoying when backspacing over a '('
    (with-eval-after-load 'paredit
      (define-key slime-repl-mode-map (read-kbd-macro paredit-backward-delete-key) nil))

    ;; Bind TAB to `indent-for-tab-command', as in regular Slime buffers.
    (define-key slime-repl-mode-map (kbd "TAB") 'indent-for-tab-command)

    (add-hook 'slime-repl-mode-hook 'sanityinc/slime-repl-setup))
#+END_SRC

* common lisp
#+BEGIN_SRC emacs-lisp
  ;; See http://bc.tech.coop/blog/070927.html
  (add-to-list 'auto-mode-alist '("\\.cl" . lisp-mode))
  (add-hook 'lisp-mode-hook (lambda ()
                              (unless (featurep 'slime)
                                (require 'slime)
                                (normal-mode))))

  (with-eval-after-load 'slime
              (when (executable-find "sbcl")
                (add-to-list 'slime-lisp-implementations
                             '(sbcl ("sbcl") :coding-system utf-8-unix))))

  ;; From http://bc.tech.coop/blog/070515.html
  (defun lispdoc ()
    "Searches lispdoc.com for SYMBOL, which is by default the symbol currently under the curser"
    (interactive)
    (let* ((word-at-point (word-at-point))
           (symbol-at-point (symbol-at-point))
           (default (symbol-name symbol-at-point))
           (inp (read-from-minibuffer
                 (if (or word-at-point symbol-at-point)
                     (concat "Symbol (default " default "): ")
                   "Symbol (no default): "))))
      (if (and (string= inp "") (not word-at-point) (not
                                                     symbol-at-point))
          (message "you didn't enter a symbol!")
        (let ((search-type (read-from-minibuffer
                            "full-text (f) or basic (b) search (default b)? ")))
          (browse-url (concat "http://lispdoc.com?q="
                              (if (string= inp "")
                                  default
                                inp)
                              "&search="
                              (if (string-equal search-type "f")
                                  "full+text+search"
                                "basic+search")))))))

  (evil-define-key 'normal lisp-mode-map (kbd "s-h") 'lispdoc)
#+END_SRC
